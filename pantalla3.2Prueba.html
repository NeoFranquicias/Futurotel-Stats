<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ocupación por Eventos en Málaga</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/2.2.1/chartjs-plugin-annotation.min.js"></script>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
            background: #0A0E17;
        }
        body {
            min-width: 100vw;
            position: relative;
            font-family: 'Orbitron', Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .chart-container {
            position: relative;
            width: 1200px;
            height: 430px;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 1;
            margin-top: 40px;
            border-radius: 16px;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
            padding: 15px;
            backdrop-filter: blur(2px);
            background: rgba(10, 14, 23, 0.3);
            border: 1px solid rgba(0, 234, 255, 0.1);
            animation: gradientBorder 4s infinite;
        }
        .chart-wrapper {
            position: relative;
            width: 100%;
            height: calc(100% - 80px);
            margin-top: 10px;
            background: #0A0E17;
            border-radius: 8px;
            overflow: hidden;
        }
        .chart-title {
            position: absolute;
            top: 5px;
            width: 100%;
            text-align: center;
            color: #00eaff;
            font-family: 'Orbitron', Arial, sans-serif;
            font-size: 2rem;
            font-weight: 600;
            margin: 0;
            padding: 8px 0;
            opacity: 0.9;
            text-shadow: 0 0 8px #00eaff77;
            z-index: 2;
        }
        .month-title {
            color: #00eaff;
            font-size: 1.3rem;
            margin: 5px 0;
            text-align: center;
            text-shadow: 0 0 5px #00eaff77;
        }
        .legend-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 10px;
            padding: 6px 12px;
            background: rgba(10, 14, 23, 0.5);
            border-radius: 8px;
            border: 1px solid rgba(0, 234, 255, 0.1);
            backdrop-filter: blur(2px);
            z-index: 10;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.9rem;
        }
        .legend-color {
            width: 20px;
            height: 3px;
            border-radius: 2px;
        }
        @keyframes gradientBorder {
            0% { border-color: rgba(0, 234, 255, 0.1); }
            50% { border-color: rgba(0, 234, 255, 0.3); }
            100% { border-color: rgba(0, 234, 255, 0.1); }
        }
    </style>
</head>
<body>
    <h2 class="chart-title">Ocupación por Eventos en Málaga</h2>
    <div class="chart-container">
        <div class="month-title">Mayo 2025</div>
        <div class="legend-container">
            <div class="legend-item">
                <div class="legend-color" style="background: #ffffff"></div>
                <span>Día del Trabajador</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ffd700"></div>
                <span>Alameda Festival</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ff69b4"></div>
                <span>Myke Towers</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #9370db"></div>
                <span>Chayanne</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #00eaff"></div>
                <span>Festival Oh See</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ff4500"></div>
                <span>Disobey</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #808080"></div>
                <span>Kidd Keo</span>
            </div>
        </div>
        <div class="chart-wrapper">
            <canvas id="occupancyChart"></canvas>
        </div>
    </div>

    <script>
        function resizeChart() {
            const c = document.getElementById('occupancyChart');
            const wrapper = document.querySelector('.chart-wrapper');
            c.width = wrapper.offsetWidth;
            c.height = wrapper.offsetHeight;
            c.style.width = wrapper.offsetWidth + 'px';
            c.style.height = wrapper.offsetHeight + 'px';
        }
        window.addEventListener('resize', resizeChart);
        resizeChart();

        document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('occupancyChart').getContext('2d');
            
            // Generate dates for May 2025
            const dates = Array.from({length: 31}, (_, i) => `${i + 1}`);
            
            // Base occupancy data
            const baseOccupancy = new Array(31).fill(60);
            
            // Día del trabajador (1-4 Mayo: 70-90%)
            baseOccupancy[0] = 70;
            baseOccupancy[1] = 75;
            baseOccupancy[2] = 83;
            baseOccupancy[3] = 90;
            
            // Set specific events occupancy
            baseOccupancy[14] = 75; // Disobey (15)
            baseOccupancy[16] = 80; // Kidd Keo (17)
            
            // Alameda Festival + Oh See + Myke Towers period
            baseOccupancy[21] = 75; // Alameda Festival start (22)
            baseOccupancy[22] = 92; // Alameda + Oh See (23)
            baseOccupancy[23] = 102; // Alameda + Oh See + Myke Towers (24)
            baseOccupancy[24] = 78; // Chayanne (25)

            const chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [{
                        label: 'Ocupación (%)',
                        data: baseOccupancy,
                        borderColor: '#ffffff',
                        backgroundColor: 'rgba(255, 255, 255, 0.1)',
                        tension: 0.4,
                        fill: false,
                        borderWidth: 2,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    layout: {
                        padding: {
                            top: 20,
                            right: 20,
                            bottom: 10,
                            left: 10
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        annotation: {
                            drawTime: 'beforeDatasetsDraw',
                            annotations: {
                                alamedaBox: {
                                    type: 'box',
                                    xMin: 21.5,
                                    xMax: 23.5,
                                    yMin: 50,
                                    yMax: 105,
                                    backgroundColor: 'rgba(255, 215, 0, 0.1)',
                                    borderColor: '#ffd700',
                                    borderWidth: 1
                                },
                                ohSeeBox: {
                                    type: 'box',
                                    xMin: 22.5,
                                    xMax: 23.5,
                                    yMin: 50,
                                    yMax: 105,
                                    backgroundColor: 'rgba(0, 234, 255, 0.1)',
                                    borderColor: '#00eaff',
                                    borderWidth: 1
                                },
                                disobeyPoint: {
                                    type: 'point',
                                    xValue: 14,
                                    yValue: 75,
                                    radius: 6,
                                    backgroundColor: '#ff4500'
                                },
                                kiddKeoPoint: {
                                    type: 'point',
                                    xValue: 16,
                                    yValue: 80,
                                    radius: 6,
                                    backgroundColor: '#808080'
                                },
                                mykeTowersPoint: {
                                    type: 'point',
                                    xValue: 23,
                                    yValue: 102,
                                    radius: 6,
                                    backgroundColor: '#ff69b4'
                                },
                                chayannePoint: {
                                    type: 'point',
                                    xValue: 24,
                                    yValue: 78,
                                    radius: 6,
                                    backgroundColor: '#9370db'
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            min: 50,
                            max: 105,
                            grid: {
                                color: 'rgba(0, 234, 255, 0.1)',
                                drawBorder: false,
                                lineWidth: 1
                            },
                            ticks: {
                                color: '#00eaff',
                                font: {
                                    family: 'Orbitron',
                                    size: 14,
                                    weight: '500'
                                },
                                padding: 10,
                                callback: function(value) {
                                    return value + '%';
                                }
                            },
                            border: {
                                display: false
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0, 234, 255, 0.1)',
                                drawBorder: false,
                                lineWidth: 1
                            },
                            ticks: {
                                color: '#00eaff',
                                font: {
                                    family: 'Orbitron',
                                    size: 14,
                                    weight: '500'
                                },
                                maxRotation: 0,
                                minRotation: 0,
                                padding: 5
                            },
                            border: {
                                display: false
                            }
                        }
                    }
                }
            });
        });
    </script>
    <script src="particles-bg.js"></script>
</body>
</html> 